<mxfile host="app.diagrams.net" modified="2021-12-01T05:42:28.173Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36" etag="1T7erkpiImAGKELVLLUJ" version="15.8.7" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="2177" dy="773" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="SqPZgyFbhEMVWTQlym7i-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="220" y="160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-3" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit ; background-color: rgb(255 , 255 , 255)&quot;&gt;GrabImageStereo&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="80" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-0" target="SqPZgyFbhEMVWTQlym7i-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-0" value="&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;检查是否需要切换模式&lt;/font&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="160" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-3" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;主线程通过调用该函数，初始化当前帧的信息并&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;进入跟踪模式。返回的是当前帧的位姿&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="315" y="80" width="270" height="50" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-4" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;主要包括只定位模式和定位加建图模式&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;变量：&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt;&lt;font style=&quot;vertical-align: inherit&quot;&gt; mbActivateLocalizationMode 控制切换到只定位模式&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mbDeactivateLocalizationMode 控制切换到定位和建图模式&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=right;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="310" y="145" width="430" height="50" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-5" target="SqPZgyFbhEMVWTQlym7i-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-5" value="检查tracking中状态是否需要reset" style="whiteSpace=wrap;html=1;rounded=1;shadow=0;strokeWidth=1;glass=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-7" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;主要包含：跟踪是否需要重新开始和active_map是否需要重新设置&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;相关变量：&lt;/div&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;mbReset&lt;/div&gt;&lt;/span&gt;&lt;/span&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mbResetActiveMap&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="315" y="220" width="360" height="70" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-8" target="SqPZgyFbhEMVWTQlym7i-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-8" value="向tracker类中输入需要应用的imu的数据" style="whiteSpace=wrap;html=1;rounded=1;shadow=0;strokeWidth=1;glass=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-10" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpTracker-&amp;gt;GrabImuData(vImuMeas[i_imu])&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;保存在&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , monospace , monospace , &amp;#34;droid sans fallback&amp;#34;&quot;&gt;mlQueueImuData 变量中&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="315" y="340" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-11" target="SqPZgyFbhEMVWTQlym7i-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-11" value="向tracker类中输入图像信息，开始跟踪机器人" style="whiteSpace=wrap;html=1;rounded=1;shadow=0;strokeWidth=1;glass=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="470" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-13" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;cv::Mat Tcw = mpTracker-&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;GrabImageStereo(imLeft,imRight,timestamp,filename);&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;输入左右图像信息，时间戳信息&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;返回的是跟踪的当前帧的位姿&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="340" y="450" width="450" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-14" value="更新当前跟踪的状态&lt;br&gt;当前跟踪到的三维点&lt;br&gt;当前帧的左眼的特征点" style="whiteSpace=wrap;html=1;rounded=1;shadow=0;strokeWidth=1;glass=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="585" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-16" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mTrackingState = mpTracker-&amp;gt;mState;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mTrackedMapPoints = mpTracker-&amp;gt;mCurrentFrame.mvpMapPoints;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mTrackedKeyPointsUn = mpTracker-&amp;gt;mCurrentFrame.mvKeysUn;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="327" y="560" width="500" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-17" value="system中主线程&lt;br&gt;可以认为是主线程" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="10" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-18" value="tracking线程" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="20" y="1210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-19" target="SqPZgyFbhEMVWTQlym7i-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-19" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;GrabImageStereo&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="170" y="1250" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-20" value="tracking中被调用的主函数，主要作用见1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="335" y="1270" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-21" target="SqPZgyFbhEMVWTQlym7i-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-21" value="对输入的左右图像进行处理，处理成为灰度图像" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="175" y="1390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-23" target="SqPZgyFbhEMVWTQlym7i-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-23" value="利用图像，imu,标定的信息初始化一个帧类" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="175" y="1530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-25" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame = Frame(mImGray,imGrayRight,timestamp,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpORBextractorLeft,mpORBextractorRight,mpORBVocabulary,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mK,mDistCoef,mbf,mThDepth,mpCamera,mpCamera2,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mTlr,&amp;amp;mLastFrame,*mpImuCalib);&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="315" y="1510" width="480" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-26" value="开始跟踪过程" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="175" y="1670" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-28" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;Track()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="315" y="1690" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-29" value="跟踪的主函数track()" style="whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="20" y="1770" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-30" target="SqPZgyFbhEMVWTQlym7i-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-30" value="tracking()" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="1840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-33" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;tracking 线程中的主要的实现跟踪的线程&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="420" y="1860" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-34" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;控制该线程的单步stop/start&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="405" y="2005" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-43" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-35" target="SqPZgyFbhEMVWTQlym7i-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-35" value="&lt;span&gt;b_stepBystep&lt;/span&gt;&lt;br&gt;&lt;span&gt;mbstep&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="1980" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-41" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpLocalMapper-&amp;gt;mbBadImu&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;判断在LocalMapper线程中IMU是否初始化成功&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;主要判断的依据是需要有一定的位移移动&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="430" y="2120" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-42" target="SqPZgyFbhEMVWTQlym7i-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-42" value="&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;检查IMU的状态&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="2120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-44" target="SqPZgyFbhEMVWTQlym7i-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-44" value="如果不是第一帧需要时间戳检查" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="2260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-46" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mState!=NO_IMAGES_YET&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="440" y="2270" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-47" target="SqPZgyFbhEMVWTQlym7i-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-47" value="设置IMU的新的bias" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="2400" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-49" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.SetNewBias(&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpLastKeyFrame-&amp;gt;GetImuBias())&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="447" y="2410" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-56" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-50" target="SqPZgyFbhEMVWTQlym7i-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-50" value="把IMU的数据进行集合" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="2540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-52" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;PreintegrateIMU()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="430" y="2560" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-55" target="SqPZgyFbhEMVWTQlym7i-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-61" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-55" target="SqPZgyFbhEMVWTQlym7i-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-55" value="初始化了" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="300" y="2670" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-57" target="SqPZgyFbhEMVWTQlym7i-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-66" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-57" target="SqPZgyFbhEMVWTQlym7i-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-57" value="&lt;div style=&quot;text-align: justify&quot;&gt;双目初始化&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;StereoInitialization&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="440" y="2680" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-59" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="395" y="2690" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-69" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-60" target="SqPZgyFbhEMVWTQlym7i-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-75" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-60" target="SqPZgyFbhEMVWTQlym7i-74" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-60" value="是否是只定位模式" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="2840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-62" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="300" y="2780" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-64" value="success" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="535" y="2790" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-65" value="return" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="690" y="2680" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-67" value="failed" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="640" y="2670" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-68" value="走只定位模式，暂时不考虑" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="80" y="2840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-70" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="220" y="2850" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-73" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="345" y="2920" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-80" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-74" target="SqPZgyFbhEMVWTQlym7i-79" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-113" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-74" target="SqPZgyFbhEMVWTQlym7i-112" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-116" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-74" target="SqPZgyFbhEMVWTQlym7i-115" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-74" value="mState" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="300" y="2970" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-78" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;RECENTLY_LOST&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="370" y="2980" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-85" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-79" target="SqPZgyFbhEMVWTQlym7i-84" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-79" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;更新上一帧上的&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;mvpMapPoints的信息&lt;/span&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="3120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-81" value="OK" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="310" y="3080" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-83" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;CheckReplacedInLastFrame&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="410" y="3130" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-88" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-84" target="SqPZgyFbhEMVWTQlym7i-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-91" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-84" target="SqPZgyFbhEMVWTQlym7i-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-84" value="条件1" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="300" y="3250" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-86" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;条件1：&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34;&quot;&gt;mVelocity&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34;&quot;&gt;empty&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34;&quot;&gt;() &amp;amp;&amp;amp;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34;&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;!pCurrentMap-&amp;gt;isImuInitialized())&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;|| mCurrentFrame.mnId&amp;lt;mnLastRelocFrameId+2&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;速度模型中速度不知道并且INU初始化失败&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;或则 当前帧和上次重定位帧之间小于2帧&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="7" y="3205" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-102" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-87" target="SqPZgyFbhEMVWTQlym7i-101" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-87" value="根据参考关键帧跟踪当前帧" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="445" y="3260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-89" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="390" y="3260" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-97" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-90" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="440" y="3290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-90" value="根据运动模型跟踪当前帧" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="3380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-92" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="305" y="3340" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-93" value="&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; background-color: rgb(255 , 255 , 255)&quot;&gt;TrackReferenceKeyFrame()&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="565" y="3280" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-94" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;TrackWithMotionModel()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="80" y="3390" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-98" value="跟踪失败" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="380" y="3350" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-104" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-101" target="SqPZgyFbhEMVWTQlym7i-103" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-107" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-101" target="SqPZgyFbhEMVWTQlym7i-106" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-101" value="跟踪成功" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="413" y="3450" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-123" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-103" target="SqPZgyFbhEMVWTQlym7i-122" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-103" value="根据当前的localmap进一步跟踪当前帧" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="276" y="3590" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-105" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="345" y="3500" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-106" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;更新track的&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34;&quot;&gt;mState&lt;/span&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="605" y="3400" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-108" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="545" y="3410" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-109" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mState = LOST;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;或者&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mState = RECENTLY_LOST;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;                        mTimeStampLost =&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mTimeStamp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="605" y="3460" width="230" height="100" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-112" value="通过当前map中关键帧的数量判断把当前的map重设还是新建一个map" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="120" y="2980" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-114" value="ELSE" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="250" y="2980" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-119" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-115" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="3489.310344827586" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-115" value="IMU初始化成功，预积分IMU，track的状态为成功。&lt;br&gt;时间太久更新track的状态" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="475" y="2965" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-117" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;PredictStateIMU()&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;bOK=true;&lt;/span&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;//时间太久&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mState = LOST;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;                            bOK=false;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="605" y="2960" width="160" height="100" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-118" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;关键帧数量 小于10：&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;font style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 12px&quot;&gt;mpSystem-&amp;gt;ResetActiveMap();&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;font style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 12px&quot;&gt;大于&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px ; background-color: rgb(255 , 255 , 255)&quot;&gt;CreateMapInAtlas()&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-100" y="2970" width="210" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-120" value="跟踪成功" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="530" y="3180" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-121" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;bOK = TrackLocalMap();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="67" y="3610" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-125" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-122" target="SqPZgyFbhEMVWTQlym7i-124" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-131" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-122" target="SqPZgyFbhEMVWTQlym7i-130" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-122" value="&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;bOK&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="296" y="3720" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-136" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-124" target="SqPZgyFbhEMVWTQlym7i-135" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-124" value="更新当前track的状态为正常" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="276" y="3890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-126" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="300" y="3810" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-127" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mState = OK&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="400" y="3910" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-137" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-130" target="SqPZgyFbhEMVWTQlym7i-135" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-130" value="更新状态为最近丢失" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="480" y="3730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-132" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="385" y="3730" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-133" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mState == OK&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="360" y="3770" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-134" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mState = RECENTLY_LOST&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="605" y="3750" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-140" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-135" target="SqPZgyFbhEMVWTQlym7i-139" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-135" value="更新运动模型" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="365" y="4040" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-138" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;更新mVelocity的值&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="200" y="4060" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-143" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-139" target="SqPZgyFbhEMVWTQlym7i-142" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-139" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;Clean VO matches&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;Delete temporal MapPoints&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="366" y="4180" width="175" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-141" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;清楚之前保存的临时的地图点&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;清楚“VO”的匹配，这里指的是？&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;双目也有吗？&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="575" y="4185" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-146" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-142" target="SqPZgyFbhEMVWTQlym7i-145" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-154" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-142" target="SqPZgyFbhEMVWTQlym7i-151" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-142" value="判断是否需要创建关键帧" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="393.5" y="4320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-144" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;bool bNeedKF = NeedNewKeyFrame();&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="95" y="4330" width="290" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-152" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-145" target="SqPZgyFbhEMVWTQlym7i-151" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-145" value="创建关键帧" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="393.5" y="4460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-147" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="400" y="4410" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-149" value="并且不是LOST的状态" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="455" y="4410" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-150" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;CreateNewKeyFrame();&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="520" y="4480" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-157" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-151" target="SqPZgyFbhEMVWTQlym7i-156" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-151" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;更新当前帧的mvpMapPoints的状态&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="285" y="4580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-155" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="315" y="4410" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-156" value="更新当前帧的参考关键帧，上一帧的信息" style="whiteSpace=wrap;html=1;rounded=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="285" y="4720" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-158" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mpReferenceKF = mpReferenceKF;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mLastFrame = Frame(mCurrentFrame);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="413" y="4720" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-161" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-159" target="SqPZgyFbhEMVWTQlym7i-160" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-159" value="跟踪的状态是LOST" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="78" y="4510" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-163" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-160" target="SqPZgyFbhEMVWTQlym7i-162" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-166" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-160" target="SqPZgyFbhEMVWTQlym7i-165" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-160" value="关键帧的数量小于6" style="rhombus;whiteSpace=wrap;html=1;rounded=0;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="83" y="4630" width="110" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-162" value="activemap 重设&lt;br&gt;return" style="whiteSpace=wrap;html=1;rounded=0;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-112" y="4640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-164" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="33" y="4640" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-173" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-165" target="SqPZgyFbhEMVWTQlym7i-156" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-165" value="创建新的actiivemap" style="whiteSpace=wrap;html=1;rounded=0;fontColor=#000000;labelBackgroundColor=#FFFFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="78" y="4800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-170" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="SqPZgyFbhEMVWTQlym7i-167" target="SqPZgyFbhEMVWTQlym7i-162" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-167" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="108" y="4730" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-169" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpSystem-&amp;gt;ResetActiveMap()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-187" y="4610" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-171" value="IMU没有初始化" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-37" y="4740" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SqPZgyFbhEMVWTQlym7i-172" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;CreateMapInAtlas();&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="4870" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UNYbB4u9IFYit2vETT7b-0" value="&lt;font&gt;&lt;font style=&quot;font-size: 20px&quot;&gt;分析tracking中的相关函数&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-780" y="20" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UNYbB4u9IFYit2vETT7b-1" value="imu预积分相关的函数" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-780" y="90" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UNYbB4u9IFYit2vETT7b-6" target="jODT9jMLzs31TshHW68C-0">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UNYbB4u9IFYit2vETT7b-6" value="&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; background-color: rgb(255 , 255 , 255)&quot;&gt;PreintegrateIMU()&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-510" y="135" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UNYbB4u9IFYit2vETT7b-8" value="&lt;span style=&quot;font-size: 14px&quot;&gt;预积分IMU数据&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-665" y="150" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-0" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;主要功能：IMU预积分，计算了雅克比矩阵，增加位姿的变换&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;协方差矩阵&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;考虑了相机时间和imu时间没有对齐的问题，使用简单的插值&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-355" y="145" width="340" height="50" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="z4itV2_sYvm4ybOh6lHU-1" target="jODT9jMLzs31TshHW68C-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-1" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;PredictStateIMU()&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-510" y="1140" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-2" value="更新imu预测的当前的位姿，速度，bias&lt;br&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-295" y="1160" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-3" value="&lt;font style=&quot;font-size: 20px&quot;&gt;双目初始化函数&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-827" y="1870" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-53" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="z4itV2_sYvm4ybOh6lHU-4" target="jODT9jMLzs31TshHW68C-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-4" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;StereoInitialization()&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=20;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-635" y="1920" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-5" value="&lt;font style=&quot;font-size: 20px&quot;&gt;跟踪函数&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-810" y="3560" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-80" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="z4itV2_sYvm4ybOh6lHU-6" target="jODT9jMLzs31TshHW68C-79">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-6" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;TrackReferenceKeyFrame()&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=20;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-607.5" y="3640" width="215" height="60" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-7" value="&lt;font style=&quot;font-size: 14px&quot;&gt;通过参考关键帧跟踪当前帧&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-340" y="3650" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-9" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;TrackWithMotionModel()&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=14;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-760" y="4760" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-10" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;TrackLocalMap()&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=14;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-750" y="4900" width="195" height="55" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-11" value="通过运动模型跟踪当前帧" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-525" y="4790" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-12" value="通过局部地图跟踪当前帧" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-525" y="4930" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-13" value="&lt;font style=&quot;font-size: 20px&quot;&gt;关键帧相关函数&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-815" y="5020" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-14" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;NeedNewKeyFrame()&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=20;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-640" y="5060" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-15" value="&lt;font style=&quot;font-size: 14px&quot;&gt;判断是否需要在当前的地图下增加关键帧&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-378" y="5080" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-16" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;CreateNewKeyFrame()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=20;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-640" y="5270" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="z4itV2_sYvm4ybOh6lHU-17" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;当判断需要关键帧时，根据当前帧创建关键帧，&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;并且在地图中插入关键帧&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-370" y="5280" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-0" target="jODT9jMLzs31TshHW68C-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-0" target="jODT9jMLzs31TshHW68C-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-0" value="&lt;font style=&quot;font-size: 12px&quot;&gt;存在前一帧&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-475" y="265" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-2" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mpPrevFrame&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;因为需要根据前一阵，加上当前的积分才能&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;得到当前的位姿&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-385" y="280" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-3" target="jODT9jMLzs31TshHW68C-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-3" value="&lt;span style=&quot;font-size: 12px&quot;&gt;保存imu数据的容器初始化&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-495" y="435" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-5" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-470" y="370" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-6" value="&lt;font style=&quot;font-size: 12px&quot;&gt;设置开始预积分标志&lt;br&gt;return&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-655" y="275" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-8" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-515" y="280" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-9" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mvImuFromLastFrame.clear();&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mvImuFromLastFrame.reserve(mlQueueImuData.size());&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;清空从上一帧到当前帧之间的imu数据容器&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-373" y="435" width="440" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-11" target="jODT9jMLzs31TshHW68C-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-11" target="jODT9jMLzs31TshHW68C-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-11" value="&lt;font style=&quot;font-size: 12px&quot;&gt;有新的imu数据&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-475" y="565" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-14" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-555" y="570" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-15" target="jODT9jMLzs31TshHW68C-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-15" value="&lt;font style=&quot;font-size: 12px&quot;&gt;向容器中加入imu数据&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-495" y="735" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-17" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-470" y="670" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-18" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;mvImuFromLastFrame 容器中加入imu数据&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-size: 14px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;m-&amp;gt;t&amp;lt;mCurrentFrame.mpPrevFrame-&amp;gt;mTimeStamp-0.001l&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;div style=&quot;line-height: 19px&quot;&gt;m-&amp;gt;t&amp;lt;mCurrentFrame.mTimeStamp-0.001l&lt;/div&gt;&lt;div style=&quot;line-height: 19px&quot;&gt;对数据进行裁剪，起始数据时间大于上一帧的时间戳减0.001s&lt;/div&gt;&lt;div style=&quot;line-height: 19px&quot;&gt;同时把时间戳小于当前帧减0.001s的数据从初始的imu数据容器中删除&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-350" y="700" width="460" height="100" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-19" target="jODT9jMLzs31TshHW68C-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-19" value="&lt;font style=&quot;font-size: 12px&quot;&gt;遍历容器中的imu数据并且进行预积分处理&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-495" y="875" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-21" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;mpImuPreintegratedFromLastKF-&amp;gt;IntegrateNewMeasurement(acc,angVel,tstep);&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;pImuPreintegratedFromLastFrame&lt;/span&gt;&lt;span&gt;-&amp;gt;&lt;/span&gt;&lt;span&gt;IntegrateNewMeasurement&lt;/span&gt;&lt;span&gt;(acc,angVel,tstep);&lt;/span&gt;&lt;/div&gt;        &lt;/span&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;font face=&quot;droid sans mono, monospace, monospace, droid sans fallback&quot;&gt;&lt;span style=&quot;font-size: 14px&quot;&gt;主要过程首先是针对imu不同时间戳下的数据插值计算加速度，角速度，时间间隔，然后迭代的进行预积分&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-379" y="880" width="670" height="50" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-22" value="&lt;font style=&quot;font-size: 12px&quot;&gt;更新当前帧的预积分信息&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-495" y="1015" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-24" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mpImuPreintegratedFrame = pImuPreintegratedFromLastFrame;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mpImuPreintegrated = mpImuPreintegratedFromLastKF;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mpLastKeyFrame = mpLastKeyFrame;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;更新当前帧预积分的信息，对于上一个关键帧预积分的结果，更新上一个关键帧信息&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-360" y="1000" width="610" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-25" target="jODT9jMLzs31TshHW68C-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-25" target="jODT9jMLzs31TshHW68C-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-25" value="&lt;span&gt;存在前一帧&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-475" y="1270" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-27" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mpPrevFrame&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;因为需要根据前一阵，加上当前的积分才能&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;得到当前的位姿&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-368" y="1290" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-28" value="return false" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-655" y="1280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-30" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-525" y="1280" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-33" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-470" y="1370" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-34" target="jODT9jMLzs31TshHW68C-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-43" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-34" target="jODT9jMLzs31TshHW68C-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-34" target="jODT9jMLzs31TshHW68C-47">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-34" value="" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-475" y="1430" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-36">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-278" y="1470" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-278" y="1460" />
              <mxPoint x="-278" y="1460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-36" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;mbMapUpdated &amp;amp;&amp;amp; mpLastKeyFrame&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;关键帧存在并且地图刚跟新，&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;这里地图更新表示刚优化关键帧的位姿&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-413" y="1370" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-37" value="通过上一帧的位姿更新当前帧的预积分的值" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-495" y="1600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-42" value="通过关键帧位姿更新当前帧中imu、&lt;br&gt;预积分的值" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-213" y="1440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-46" value="关键帧没有更新&lt;br&gt;!mbMapUpdated" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-430" y="1535" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-47" value="预积分失败&lt;br&gt;return false" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-655" y="1440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-49" value="ELSE" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-515" y="1440" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-50" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;        &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;const cv::Mat twb1 = mpLastKeyFrame-&amp;gt;GetImuPosition();&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;        &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;const cv::Mat Rwb1 = mpLastKeyFrame-&amp;gt;GetImuRotation();&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;        &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;const cv::Mat Vwb1 = mpLastKeyFrame-&amp;gt;GetVelocity();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-310" y="1505" width="470" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-51" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;const cv::Mat twb1 = mLastFrame.GetImuPosition();&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;        &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;const cv::Mat Rwb1 = mLastFrame.GetImuRotation();&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;        &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;const cv::Mat Vwb1 = mLastFrame.mVw;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-635" y="1670" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-52">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-530" y="2220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-52" value="&lt;font style=&quot;font-size: 12px&quot;&gt;N&amp;gt;500&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-570" y="2050" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-54" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-405" y="2080" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-56" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.N&amp;gt;500&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;当前帧中的特征点需要大于500&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-485" y="2070" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-59" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-560" y="2160" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-63" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-61" target="jODT9jMLzs31TshHW68C-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-61" value="&lt;font style=&quot;font-size: 12px&quot;&gt;imu预积分准备好&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-590" y="2218" width="120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-68" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-62" target="jODT9jMLzs31TshHW68C-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-62" value="&lt;font style=&quot;font-size: 12px&quot;&gt;初始化当前帧和上一个关键帧的预积分类变量&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-600" y="2450" width="140" height="72" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-64" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;!mCurrentFrame.mpImuPreintegrated&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;|| !mLastFrame.mpImuPreintegrated&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;cv::norm(mCurrentFrame.mpImuPreintegratedFrame&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;-&amp;gt;avgA-mLastFrame.mpImuPreintegratedFrame-&amp;gt;avgA)&amp;lt;0.5&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;需要满足当前帧和上一帧都存在预积分的过程，同时这两帧之间平均需要有超过0.5&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;的加速度的变化&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-470" y="2220" width="530" height="120" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-65" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-580" y="2380" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-66" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpImuPreintegratedFromLastKF =&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;new IMU::Preintegrated(IMU::Bias(),*mpImuCalib);&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;            &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mpImuPreintegrated = mpImuPreintegratedFromLastKF;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;pImuPreintegratedFromLastKF =&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;new IMU::Preintegrated(IMU::Bias(),*mpImuCalib);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-440" y="2420" width="550" height="100" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-71" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-67" target="jODT9jMLzs31TshHW68C-70">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-67" value="&lt;font style=&quot;font-size: 12px&quot;&gt;设置当前帧的位姿和当前的速度&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-590" y="2608" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-69" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.SetImuPoseVelocity(Rwb0, twb0,&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;cv::Mat::zeros(3,1,CV_32F));&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-440" y="2608" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-70" target="jODT9jMLzs31TshHW68C-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-70" value="&lt;font style=&quot;font-size: 12px&quot;&gt;创建关键帧&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-590" y="2748" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-72" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;KeyFrame* pKFini = new KeyFrame(mCurrentFrame,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpAtlas-&amp;gt;GetCurrentMap(),mpKeyFrameDB);&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-445" y="2760" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-76" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-73" target="jODT9jMLzs31TshHW68C-75">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-73" value="&lt;font style=&quot;font-size: 12px&quot;&gt;把关键帧插入地图中，把关键帧中匹配好的地图点更新到地图中&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-595" y="2889" width="130" height="82" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-75" value="&lt;font style=&quot;font-size: 12px&quot;&gt;跟新其他变量的信息&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-590" y="3062" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-77" value="&lt;div style=&quot;line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; text-align: justify&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpLocalMapper-&amp;gt;InsertKeyFrame(pKFini);&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;font face=&quot;droid sans mono, monospace, monospace, droid sans fallback&quot;&gt;&lt;span style=&quot;font-size: 14px&quot;&gt;把关键帧插入到局部地图中&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mLastFrame = Frame(mCurrentFrame);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;&lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;跟新上一帧&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mnLastKeyFrameId=mCurrentFrame.mnId;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpLastKeyFrame = pKFini;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;&lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;更新上一个关键帧的信息&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mnLastRelocFrameId = mCurrentFrame.mnId;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mvpLocalKeyFrames.push_back(pKFini);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mvpLocalMapPoints=mpAtlas-&amp;gt;GetAllMapPoints();&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpReferenceKF = pKFini;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mpReferenceKF = pKFini;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpAtlas-&amp;gt;SetReferenceMapPoints(mvpLocalMapPoints);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px&quot;&gt;        &lt;font style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpAtlas-&amp;gt;GetCurrentMap()-&amp;gt;mvpKeyFrameOrigins.push_back(pKFini);&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-710" y="3150" width="550" height="270" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-78" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;优先使用的是运动模型，如果不成功或则没有运动模型需要的参数使用&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span&gt;通过参考关键帧跟踪当前帧&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-725" y="3585" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-83" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-79" target="jODT9jMLzs31TshHW68C-82">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-79" value="&lt;font style=&quot;font-size: 12px&quot;&gt;计算当前帧的视觉词袋&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-560" y="3780" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-81" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.ComputeBoW();&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-400" y="3790" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-86" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-82" target="jODT9jMLzs31TshHW68C-85">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-82" value="&lt;font style=&quot;font-size: 12px&quot;&gt;通过视觉词袋寻找和关键帧的匹配特征点&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-560" y="3920" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-84" value="&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;int nmatches = matcher.SearchByBoW(&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify ; font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mpReferenceKF,mCurrentFrame,vpMapPointMatches);&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-403" y="3920" width="410" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-88" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-85" target="jODT9jMLzs31TshHW68C-87">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-91" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-85" target="jODT9jMLzs31TshHW68C-90">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-85" value="&lt;font style=&quot;font-size: 12px&quot;&gt;匹配特征数&lt;br&gt;量大于15&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-550" y="4050" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-87" value="&lt;font style=&quot;font-size: 12px&quot;&gt;跟踪失败&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-740" y="4070" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-89" value="NO" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-595" y="4080" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-95" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-90" target="jODT9jMLzs31TshHW68C-94">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-90" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;更新当前帧的地图点和位姿&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-560" y="4250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-92" value="YES" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-530" y="4180" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-93" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.mvpMapPoints = vpMapPointMatches;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify&quot;&gt;    &lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;mCurrentFrame.SetPose(mLastFrame.mTcw);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-433" y="4260" width="410" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="jODT9jMLzs31TshHW68C-94" target="jODT9jMLzs31TshHW68C-97">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-94" value="&lt;font style=&quot;font-size: 12px&quot;&gt;通过优化算法求解当前帧的位姿&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-560" y="4390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-96" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;Optimizer::PoseOptimization(&amp;amp;mCurrentFrame);&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-425" y="4400" width="390" height="20" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-97" value="&lt;div style=&quot;text-align: justify&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;用最新的位姿把错误的匹配去除&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-560" y="4530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jODT9jMLzs31TshHW68C-99" value="&lt;div style=&quot;font-family: &amp;#34;droid sans mono&amp;#34; , &amp;#34;monospace&amp;#34; , monospace , &amp;#34;droid sans fallback&amp;#34; ; font-size: 14px ; line-height: 19px&quot;&gt;Discard outliers&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-420" y="4550" width="150" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
